
# Data-Model Specification – Release v0.1

This document defines the canonical schema for SwiftData entities used in the Books iOS app.

---

## 1. Entity: `BookMetadata`

| Field            | Type    | Optional | Default | Notes                                                 |
|------------------|---------|----------|---------|-------------------------------------------------------|
| `googleBooksID`  | String  | ❌       | –       | Primary identifier when fetched online; UUID when manual. |
| `title`          | String  | ❌       | –       | Trimmed, max 512 chars.                               |
| `authors`        | [String]| ❌       | –       | ≥ 1 author. Normalized “Last, First” not enforced yet.|
| `publishedDate`  | String  | ✅       | –       | Preferred ISO-8601 `yyyy-MM-dd`; may be year-only.    |
| `pageCount`      | Int     | ✅       | –       | Positive integer.                                     |
| `publisher`      | String  | ✅       | –       |                                                       |
| `isbn`           | String  | ✅       | –       | 10 or 13 digits, no dashes; validation deferred.      |
| `imageURL`       | URL     | ✅       | –       | Cover thumbnail.                                      |
| `bookDescription`| String  | ✅       | –       | Plain-text/Markdown; max 10 k chars.                  |

### Relationships
• _Zero-or-many_ `UserBook` objects reference a single `BookMetadata`.
• Cascade delete: only remove `BookMetadata` when no `UserBook` points to it.

---

## 2. Entity: `UserBook`

| Field            | Type   | Optional | Default            | Notes                                                         |
|------------------|--------|----------|--------------------|---------------------------------------------------------------|
| `id`             | UUID   | ❌       | Auto-generated     | Primary key.                                                  |
| `metadata`       | Link→BookMetadata | ❌ | –              | 1 : 1 required relationship.                                  |
| `readingStatus`  | Enum(`toRead`,`reading`,`read`) | ❌ | `toRead` | Governs date rules below.                                     |
| `onWishlist`     | Bool   | ❌       | `false`            | True → separate wishlist view.                                |
| `rating`         | Int    | ✅       | –                  | 1-5 inclusive.                                                |
| `notes`          | String | ✅       | –                  | Private; max 5 k chars.                                       |
| `dateAdded`      | Date   | ❌       | `Date()`           | Set on insertion.                                             |
| `dateStarted`    | Date   | ✅       | –                  | Auto-set when status → `.reading` if nil.                     |
| `dateCompleted`  | Date   | ✅       | –                  | Auto-set when status → `.read`.                               |

### Derived & Validation Rules
